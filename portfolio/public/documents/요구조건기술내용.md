# **스마트폰/태블릿 기반 AI 품질 상황 판단 및 리포팅 시스템 통합 로드맵**

## **1. 개요 (Overview)**
본 문서는 포항 공장의 5대 핵심 공정(압연, 프레스, 표면처리, 용접, 주조)을 대상으로, 태블릿 및 저가형 카메라를 활용한 **지능형 공정 상황 판단 및 리포팅 시스템** 구축을 위한 마스터 플랜입니다. 기존 보유 기술인 `AI Agents`(AMS), `DPS-POP/SPC`, `FMEA Automation`, `Evaluation Framework`를 유기적으로 연결하여, **"인지-판단-리포팅-진화"**의 4단계 자율 루프를 실현하는 것을 목표로 합니다.

---

## **2. 시스템 통합 아키텍처 (Integrated System Architecture)**

전체 시스템의 데이터 흐름과 모듈 간 상호작용을 나타낸 아키텍처입니다. **DPS(Data Processing & Sensing)**와 **DPS-POP**가 데이터 수집의 핵심 축을 담당합니다.

```mermaid
graph TD
    %% Define Styles
    classDef hardware fill:#f9f,stroke:#333,stroke-width:2px;
    classDef process fill:#bbf,stroke:#333,stroke-width:2px;
    classDef intelligence fill:#dfd,stroke:#333,stroke-width:2px;
    classDef knowledge fill:#fdd,stroke:#333,stroke-width:2px;

    subgraph "Phase 1: DPS & Data Layer"
        DPS[DPS\n(Tablet/Vision Sensor)]:::hardware
        DPS_POP[DPS-POP\n(Context Provider)]:::process
        DPS_SPC[DPS-SPC\n(Statistical History)]:::process
    end

    subgraph "Phase 2: Intelligence Layer"
        VisionAI[Vision AI Agent\n(Anomaly Detection / AMS)]:::intelligence
        GenAI[GenAI Reporter\n(Gemini 3.0 / LLM)]:::intelligence
    end

    subgraph "Phase 3: Knowledge Cycle"
        FMEA[FMEA Automation\n(Dynamic Knowledge Base)]:::knowledge
        Evaluation[Evaluation Framework\n(Agent QA System)]:::knowledge
    end

    %% Data Flow
    DPS -->|1. Image Stream & Req| VisionAI
    DPS -->|2. Context Req (Lot No)| DPS_POP
    DPS_POP -->|3. Context Data (Status, Spec)| VisionAI
    
    VisionAI -->|4. Anomaly Signal| GenAI
    VisionAI -->|5. Query Stats| DPS_SPC
    DPS_SPC -->|6. Spec/Trend Data| GenAI
    
    GenAI -->|7. Context-Aware Report| User((Manager/Worker))
    
    User -->|8. Feedback/Action| FMEA
    GenAI -->|9. Draft Report| Evaluation
    Evaluation -->|10. Performance Score| GenAI
    FMEA --o|11. New Risk Factors| VisionAI
```

### **데이터 흐름 상세 (Data Flow Narrative)**
1.  **DPS Acquisition:** 현장의 태블릿/센서 시스템인 **DPS (Data Processing & Sensing)**가 공정 영상을 촬영하고 1차 전처리를 수행한 뒤 서버로 스트리밍합니다.
2.  **Context Synchronization:** 동시에 DPS는 **DPS-POP** 시스템에 현재 라인의 생산 정보(Lot No, 품목, 설비 상태)를 요청하여 영상에 메타데이터로 태깅합니다.
3.  **Vision Analysis:** `Vision AI Agent`(AMS)가 영상을 분석하여 '불꽃 튐', '작업자 부재', '설비 진동' 등의 시각적 특이자(Feature)를 추출합니다.
4.  **Statistical Cross-Check:** AI는 **DPS-SPC**에 접속하여 해당 설비의 최근 3시간 데이터(온도, 압력 등)를 조회, 시각적 이상 징후와 센서 데이터 간의 상관관계를 확인합니다.
5.  **Generative Reporting:** `GenAI (Gemini 3.0)`는 [영상 분석 결과 + DPS-POP 정보 + SPC 통계]를 종합하여 자연어 리포트를 작성합니다.
    *   *예: "2호기 프레스의 진동 패턴이 SPC 상한선을 초과했으며, 영상에서도 배출 시 흔들림이 관측됩니다."*
6.  **Knowledge Loop:** 리포트는 관리자에게 전송됨과 동시에 `FMEA System`과 `Evaluation Framework`로 전달되어 새로운 불량 유형 학습 및 에이전트 성능 평가에 활용됩니다.

---

## **3. 보유 기술 상세 연결 및 고도화 방안 (Deep Dive Integration)**

각 단계별로 보유 기술이 어떻게 구체적으로 연결되고 작동하는지 기술합니다.

### **3.1 DPS (Data Processing & Sensing System)**
*   **활용 자산:** `@[AI_Agent_Test_Document_Results/Image_Labeling_Platform]` (Base.Maui, HalconApp)
*   **기능 정의:** 모바일 및 현장 센서 데이터를 수집하고 1차 가공(전처리)하는 시스템.
*   **연결성 (Connectivity):**
    *   **앱-서버 통신:** `DPS` 앱 내에 `WebSocket` 클라이언트를 구현하여, 촬영된 프레임(Frame)을 실시간으로 `AI_agent_test` 서버의 `StreamHandler`로 전송.
    *   **엣지 프로세싱:** `HalconApp`의 경량 알고리즘(예: Blur Check)을 탑재하여 유효 데이터만 선별 전송.

### **3.2 DPS-POP (Manufacturing Context Layer)**
*   **활용 자산:** `@[AI_Agent_Test_Document_Results/SeAH POP_STRACK]`, `@[AI_Agent_Test_Document_Results/Seah_SPC]` (Systems renamed to DPS-POP/SPC)
*   **기능 정의:** 설비 가동 현황, 작업 지시 사항, 품질 규격 등 제조 맥락(Context)을 제공하는 시스템.
*   **연결성 (Connectivity):**
    *   **API Gateway:** 영상이 입고되는 순간, `Feature Based Service (FBS)` 모듈이 **DPS-POP**의 API를 호출.
    *   **데이터 융합:**
        *   **DPS Data:** `{"event": "spark_detected", "confidence": 0.88}`
        *   **DPS-POP Data:** `{"lot_no": "A-123", "target_thickness": 5.0}`
        *   **DPS-SPC Data:** `{"recent_cpk": 1.1}`
    *   이 데이터들을 결합하여 AI의 판단 근거로 활용.

### **3.3 Intelligent Reporting (입: 분석 및 소통)**
*   **활용 자산:** `@[AI_agent_test]` (AMS, GenAI Connector)
*   **연결성 (Connectivity):**
    *   **Prompt Engineering:** 병합된 데이터를 바탕으로 동적 프롬프트 생성.
    *   **RAG (Retrieval-Augmented Generation):** 과거 유사 사례를 벡터 DB에서 검색(RAG)하여, 단순 현상 묘사가 아닌 "해결책"까지 제시.

### **3.4 Evaluation & Knowledge Evolution (성장: 자가 발전)**
*   **활용 자산:** `@[platform_all/FMEA_Automation_Generation_Technology]`, `@[platform_all/Evaluation_Framework_merge]`
*   **연결성 (Connectivity):**
    *   **Feedback Loop:** 관리자 피드백이 `Evaluation Framework`로 전송.
    *   **Auto-FMEA:** 새로운 고장 형태 발견 시 `FMEA Automation` 모듈이 작동하여 지식 베이스 자동 갱신.

---

## **4. 통합 구축 단계 (Implementation Phases)**

### **Phase 1: Foundation (연결의 시작)**
*   **Focus:** 데이터 파이프라인 연결 (DPS <-> DPS-POP <-> Server).
*   **Detail:** 
    *   **DPS** 앱에서 촬영 버튼을 누르면 **DPS-POP** 서버에서 현재 Lot 정보를 받아오는 양방향 통신 구현.
    *   수집된 영상과 Lot 번호를 매핑하여 DB에 적재하는 로그 시스템 구축.

### **Phase 2: Intelligence (지능의 결합)**
*   **Focus:** 멀티모달 분석 및 리포팅.
*   **Detail:**
    *   영상 내 이상 징후를 텍스트로 변환하는 `Video-to-Text` 모델 적용.
    *   SPC 데이터를 LLM이 이해할 수 있는 요약 통계(Summary Stats)로 변환하는 전처리기 개발.

### **Phase 3: Evolution (지식의 순환)**
*   **Focus:** 무인 자동화된 지식 갱신.
*   **Detail:**
    *   FMEA 문서를 AI가 읽고 쓸 수 있는 구조(Graph DB/Ontology)로 고도화.
    *   평가 프레임워크가 모니터링 결과를 재학습 데이터셋으로 자동 전환.

---

## **5. 결론 (Conclusion)**

단순히 기능을 나열하는 것이 아니라, **"데이터가 시스템 간에 어떻게 흐르고(Flow), 어떻게 가치(Value)로 변환되는지"**에 집중하였습니다.

*   `DPS-POP`는 **"무엇을(What)"** 만들고 있는지 알려줍니다.
*   `DPS`는 **"지금 무슨 일(Event)"**이 일어나는지 봅니다.
*   `DPS-SPC`는 **"과거(History)"**에 어땠는지를 말해줍니다.
*   `FMEA`는 **"왜(Why)"** 그런 일이 일어났는지 지식을 제공합니다.
*   `Evaluation`은 시스템이 **"얼마나 잘(How well)"** 하고 있는지 감시합니다.

이 모든 것이 `AI Agent`라는 지휘자를 통해 하나의 오케스트라처럼 동작하는 것이 본 시스템의 최종 모습입니다.

---

## **6. 미래 발전 가능성 (Future Possibilities: The "Art of the Possible")**

현재 보유 기술의 통합이 완료된 후, 이 플랫폼이 도달할 수 있는 **최종적인 미래 모습(State of the Art)**입니다. 단순한 관여를 넘어 '자율 제조'의 핵심 두뇌로 진화합니다.

### **6.1 자율 제어 루프 (Autonomous Control Loop)**
*   **Now:** 에이전트가 문제 상황을 발견하고 "전압을 낮추십시오"라고 리포트함 (Open Loop).
*   **Future:** 에이전트가 `DPS-POP/PLC`에 직접 개입하여 **"용접 전압을 -5V 자동 조정"**하고 결과를 모니터링함 (Closed Loop).
    *   **가능성:** `AMS`의 제어 신뢰도를 이 99.9% 이상으로 인증할 경우, 사람의 승인 없이 0.1초 내에 파라미터를 미세 조정하여 불량 발생 자체를 원천 차단.

### **6.2 초지능형 글로벌 제조 지식망 (Global Manufacturing Brain)**
*   **Now:** 포항 공장의 불량 데이터를 학습하여 포항 공장에서 재활용.
*   **Future:** 전 세계 생산 기지(창원, 군산, 해외 등)의 `AMS`가 하나로 연결됨.
    *   **시나리오:** 베트남 공장에서 처음 발견된 '신종 용접 크랙' 데이터를 `FMEA Auto Gen`이 분석하여 해결책을 도출하면, **1분 뒤 포항 공장의 에이전트가 이미 그 예방책을 알고 있게 됨.**
    *   **기술:** Federated Learning(연합 학습)과 Ontology Cloud를 통해 물리적 거리를 초월한 집단지성 구현.

### **6.3 디지털 트윈 기반 예지 보전 (Digital Twin Simulation)**
*   **Now:** 영상에서 "흔들림"이 보이면 경고.
*   **Future:** 현재의 흔들림 데이터를 가상 공간의 `Digital Twin` 설비에 주입하여, **"이대로 3시간 더 가동하면 베어링 파손 확률 85%"**라는 구체적인 미래 예측 리포트 생성.
    *   **기술:** `DPS-SPC` 데이터와 영상 데이터를 물리 엔진 시뮬레이터와 연동하여 단순 통계를 넘어서는 물리적 인과관계 예측.

### **6.4 제품 설계 역제안 (Reverse Engineering Feedback)**
*   **Now:** 생산 공정의 문제점을 지적.
*   **Future:** 공정상 반복되는 난제(Pain Point)를 분석하여 **"제품 설계 자체를 변경"**하도록 R&D 부서에 제안.
    *   **시나리오:** "A부품의 곡률 반경이 너무 작아 프레스 불량이 반복됩니다. 반경을 2mm 늘리면 생산성이 15% 향상됩니다."라고 `Evaluation AI`가 설계자에게 구체적인 수치와 함께 역제안.

**요약하자면, 이 시스템은 단순한 '품질 감시자(Inspector)'에서 시작하여, 궁극적으로는 공장 전체를 최적화하고 지휘하는 '자율 공장장(Autonomous Plant Manager)'으로 진화할 잠재력을 가지고 있습니다.**